/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */

subprojects({
    
    //上传资源配置
    uploadArchives({
         repositories({
             mavenDeployer({
                 //上传资源到Maven私服
                repository(url: "http://localhost:8081/repository/maven-releases/",
                {
                    authentication(userName:"admin",password:"admin123")
                })
                
                pom.artifactId ="$project.name"
                pom.groupId ="$project.group"
             })
         })
    })

    //定义项目目录结构
    def dirs = [new File("$projectDir/src/main/java"),
                new File("$projectDir/src/main/resources"),
                new File("$projectDir/src/test/java"),
                new File("$projectDir/src/test/resources")]

    //创建项目目录结构
    task('creadirs',{
        dirs.each({
            if(!it.exists())
            {
                it.mkdirs()
                println("creadirs new $it.path")
            }
            else
            {
                println("creadirs exists $it.path")
            }
        })
    })
})